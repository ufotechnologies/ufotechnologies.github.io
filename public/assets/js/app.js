//   _  /._  _  r14 2018-11-09 8:36pm
//  /_|///_'/ /
Promise.create=function(){let e,t;const i=new Promise(function(i,s){e=i,t=s});return i.resolve=e,i.reject=t,i},Math.sign=function(e){return 0===(e=+e)||isNaN(e)?Number(e):e>0?1:-1},Math.degrees=function(e){return e*(180/Math.PI)},Math.radians=function(e){return e*(Math.PI/180)},Math.clamp=function(e,t,i){return Math.min(Math.max(e,Math.min(t,i)),Math.max(t,i))},Math.range=function(e,t,i,s,n,r){const a=(e-t)*(n-s)/(i-t)+s;return r?Math.clamp(a,s,n):a},Math.mix=function(e,t,i){return e*(1-i)+t*i},Math.step=function(e,t){return t<e?0:1},Math.smoothStep=function(e,t,i){const s=Math.max(0,Math.min(1,(i-e)/(t-e)));return s*s*(3-2*s)},Math.fract=function(e){return e-Math.floor(e)},Math.mod=function(e,t){return(e%t+t)%t},Array.prototype.shuffle=function(){let e,t,i=this.length;for(;0!==i;)t=Math.floor(Math.random()*i),e=this[i-=1],this[i]=this[t],this[t]=e;return this},Array.storeRandom=function(e){e.randomStore=[]},Array.prototype.random=function(e){let t=Math.floor(Math.random()*this.length);if(e&&!this.randomStore&&Array.storeRandom(this),!this.randomStore)return this[t];if(e>this.length-1&&(e=this.length),e>1){for(;~this.randomStore.indexOf(t);)t++>this.length-1&&(t=0);this.randomStore.push(t),this.randomStore.length>=e&&this.randomStore.shift()}return this[t]},Array.prototype.remove=function(e){const t=this.indexOf(e);if(~t)return this.splice(t,1)},Array.prototype.last=function(){return this[this.length-1]},String.prototype.includes=function(e){if(!Array.isArray(e))return~this.indexOf(e);for(let t=0;t<e.length;t++)if(~this.indexOf(e[t]))return!0;return!1},String.prototype.clip=function(e,t){return this.length>e?this.slice(0,e)+t:this},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.replaceAll=function(e,t){return this.split(e).join(t)},Date.prototype.addDays=function(e){const t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},window.get=function(e,t={}){const i=Promise.create();return t.method="GET",window.fetch(e,t).then(function(e){if(!e.ok)return i.reject(e);e.text().then(function(e){if(e.charAt(0).includes(["[","{"]))try{i.resolve(JSON.parse(e))}catch(t){i.resolve(e)}else i.resolve(e)})}).catch(i.reject),i},window.post=function(e,t,i={}){const s=Promise.create();return i.method="POST",i.body=JSON.stringify(t),window.fetch(e,i).then(function(e){if(!e.ok)return s.reject(e);e.text().then(function(e){if(e.charAt(0).includes(["[","{"]))try{s.resolve(JSON.parse(e))}catch(t){s.resolve(e)}else s.resolve(e)})}).catch(s.reject),s},window.getURL=function(e,t="_blank"){window.open(e,t)},window.Config||(window.Config={}),window.Global||(window.Global={});class Utils{static random(e,t,i=0){if(void 0===e)return Math.random();if(e===t)return e;e=e||0,t=t||1;const s=Math.pow(10,i);return Math.round((e+Math.random()*(t-e))*s)/s}static headsTails(e,t){return this.random(0,1)?t:e}static queryString(e){const t=decodeURI(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURI(e).replace(/[.+*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));return!(!t.length||"0"===t||"false"===t)&&t}static getConstructorName(e){return e.constructor.name||e.constructor.toString().match(/function ([^(]+)/)[1]}static nullObject(e){for(let t in e)void 0!==e[t]&&(e[t]=null);return null}static cloneObject(e){return JSON.parse(JSON.stringify(e))}static mergeObject(...e){const t={};for(let i of e)Object.assign(t,i);return t}static cloneArray(e){return e.slice(0)}static basename(e,t){const i=e.split("/").last();return t?i:i.split(".")[0]}static extension(e){return e.split(".").last().split("?")[0].toLowerCase()}static base64(e){return window.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t)))}static date(e){const t=e.split(/[^0-9]/);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])}static timestamp(){return(Date.now()+this.random(0,99999)).toString()}static pad(e){return e<10?"0"+e:e}static get hash(){return window.location.hash.slice(1)}}class Render{static init(){const e=this,t=[],i=200;let s=performance.now();function n(r){const a=Math.min(i,r-s);s=r,e.TIME=r,e.DELTA=a;for(let e=t.length-1;e>=0;e--){const i=t[e];if(i)if(i.fps){if(r-i.last<1e3/i.fps)continue;i(++i.frame),i.last=r}else i(r,a);else t.remove(i)}e.paused||requestAnimationFrame(n)}requestAnimationFrame(n),this.start=((e,i)=>{i&&(e.fps=i,e.last=-1/0,e.frame=-1),~t.indexOf(e)||t.unshift(e)}),this.stop=(e=>{t.remove(e)}),this.tick=(()=>{this.TIME=performance.now(),n(this.TIME)}),this.pause=(()=>{this.paused=!0}),this.resume=(()=>{this.paused&&(this.paused=!1,requestAnimationFrame(n))})}}Render.init();class Timer{static init(){const e=[],t=[];Render.start(function(i,s){for(let n=0;n<t.length;n++){const i=t[n];i.callback=null,e.remove(i)}t.length&&(t.length=0);for(let n=0;n<e.length;n++){const i=e[n];i?(i.current+=s)>=i.time&&(i.callback&&i.callback(...i.args),t.push(i)):e.remove(i)}}),this.clearTimeout=(t=>{const i=function(t){for(let i=0;i<e.length;i++)if(e[i].ref===t)return e[i];return null}(t);return!!i&&(i.callback=null,e.remove(i),!0)}),this.create=((t,i=1,...s)=>{const n={time:Math.max(1,i),current:0,ref:Utils.timestamp(),callback:t,args:s};return e.push(n),n.ref}),window.defer=this.defer=(e=>this.create(e,1))}}Timer.init();class Events{constructor(){class e{constructor(){this.events=[],this.links=[]}add(e,t,i){this.events.push({event:e,callback:t,object:i})}remove(e,t){for(let i=this.events.length-1;i>=0;i--)this.events[i].event===e&&this.events[i].callback===t&&(this.events[i].removed=!0,this.events.splice(i,1)[0]=null)}fire(e,t={}){let i=!1;const s=Utils.cloneArray(this.events);for(let n=0;n<s.length;n++)s[n].event!==e||s[n].removed||(s[n].callback(t),i=!0);return i}destroy(e){for(let t=this.events.length-1;t>=0;t--)this.events[t].object===e&&(this.events.splice(t,1)[0]=null)}link(e){~this.links.indexOf(e)||this.links.push(e)}}Events.initialized||(Events.emitter=new e,Events.VISIBILITY="visibility",Events.COMPLETE="complete",Events.PROGRESS="progress",Events.UPDATE="update",Events.LOADED="loaded",Events.ERROR="error",Events.READY="ready",Events.RESIZE="resize",Events.CLICK="click",Events.HOVER="hover",Events.FULLSCREEN="fullscreen",Events.KEYBOARD_PRESS="keyboard_press",Events.KEYBOARD_DOWN="keyboard_down",Events.KEYBOARD_UP="keyboard_up",Events.initialized=!0);const t=[];this.emitter=new e,this.add=((e,i,s)=>{if("object"!=typeof e&&(s=i,i=e,e=null),e){const n=e.events.emitter;n.add(i,s,this),n.link(this),t.push(n)}else Events.emitter.add(i,s,this)}),this.remove=((e,t,i)=>{"object"!=typeof e&&(i=t,t=e,e=null),e?e.events.emitter.remove(t,i):Events.emitter.remove(t,i)}),this.fire=((e,t={},i)=>{this.emitter.fire(e,t)||i||Events.emitter.fire(e,t)}),this.bubble=((e,t)=>{this.add(e,t,e=>this.fire(t,e))}),this.destroy=(()=>(Events.emitter.destroy(this),t.forEach(e=>e.destroy(this)),this.emitter.links.forEach(e=>{e.unlink&&e.unlink(this.emitter)}),Utils.nullObject(this))),this.unlink=(e=>{t.remove(e)})}}class Device{static init(){this.agent=navigator.userAgent.toLowerCase(),this.pixelRatio=window.devicePixelRatio,this.webcam=!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia),this.language=navigator.userLanguage||navigator.language,this.webaudio=!!window.AudioContext,this.os=(()=>this.detect(["iphone","ipad"])?"ios":this.detect(["android"])?"android":this.detect(["blackberry"])?"blackberry":this.detect(["mac os"])?"mac":this.detect(["windows"])?"windows":this.detect(["linux"])?"linux":"unknown")(),this.browser=(()=>"ios"===this.os?this.detect(["safari"])?"safari":"unknown":"android"===this.os?this.detect(["chrome"])?"chrome":this.detect(["firefox"])?"firefox":"browser":this.detect(["msie"])?"ie":this.detect(["trident"])&&this.detect(["rv:"])?"ie":this.detect(["windows"])&&this.detect(["edge"])?"ie":this.detect(["chrome"])?"chrome":this.detect(["safari"])?"safari":this.detect(["firefox"])?"firefox":"unknown")(),this.mobile=this.detect(["iphone","ipad","android","blackberry"]),this.mobile&&(this.tablet=Math.max(window.screen?screen.width:window.innerWidth,window.screen?screen.height:window.innerHeight)>1e3,this.phone=!this.tablet),this.webgl=(()=>{try{const e=["webgl","experimental-webgl","webkit-3d","moz-webgl"],t=document.createElement("canvas");let i;for(let r=0;r<e.length&&!(i=t.getContext(e[r]));r++);const s=i.getExtension("WEBGL_debug_renderer_info"),n={};return s&&(n.gpu=i.getParameter(s.UNMASKED_RENDERER_WEBGL).toLowerCase()),n.renderer=i.getParameter(i.RENDERER).toLowerCase(),n.version=i.getParameter(i.VERSION).toLowerCase(),n.glsl=i.getParameter(i.SHADING_LANGUAGE_VERSION).toLowerCase(),n.extensions=i.getSupportedExtensions(),n.detect=(e=>{if(n.gpu&&n.gpu.includes(e))return!0;if(n.version&&n.version.includes(e))return!0;for(let t=0;t<n.extensions.length;t++)if(n.extensions[t].toLowerCase().includes(e))return!0;return!1}),n}catch(e){return!1}})()}static detect(e){return this.agent.includes(e)}static vibrate(e){navigator.vibrate&&navigator.vibrate(e)}}Device.init();class Component{constructor(){this.events=new Events,this.classes=[],this.timers=[],this.loops=[]}initClass(e,...t){const i=new e(...t);return this.add(i),i}add(e){return e.destroy&&(this.classes.push(e),e.parent=this),this}delayedCall(e,t=0,...i){if(!this.timers)return;const s=Timer.create(()=>{e&&e(...i)},t);return this.timers.push(s),this.timers.length>50&&this.timers.shift(),s}clearTimers(){for(let e=this.timers.length-1;e>=0;e--)Timer.clearTimeout(this.timers[e]);this.timers.length=0}startRender(e,t){this.loops.push(e),Render.start(e,t)}stopRender(e){this.loops.remove(e),Render.stop(e)}clearRenders(){for(let e=this.loops.length-1;e>=0;e--)this.stopRender(this.loops[e]);this.loops.length=0}destroy(){if(this.classes){this.removed=!0;const e=this.parent;e&&!e.removed&&e.remove&&e.remove(this);for(let t=this.classes.length-1;t>=0;t--){const e=this.classes[t];e&&e.destroy&&e.destroy()}this.classes.length=0,this.clearRenders(),this.clearTimers(),this.events.destroy()}return Utils.nullObject(this)}remove(e){this.classes.remove(e)}}class Assets{static init(){const e={},t={};this.CDN="",this.CORS=null,this.getPath=(e=>~e.indexOf("//")?e:(this.CDN&&!~e.indexOf(this.CDN)&&(e=this.CDN+e),e)),this.createImage=((t,i,s)=>{"boolean"!=typeof i&&(s=i,i=null);const n=new Image;return n.crossOrigin=this.CORS,n.onload=s,n.onerror=s,n.src=this.getPath(t),i&&(e[t]=n),n}),this.getImage=(t=>e[t]),this.storeData=((e,i)=>(t[e]=i,t[e])),this.getData=(e=>t[e])}static loadImage(e){"string"==typeof e&&(e=this.createImage(e));const t=Promise.create();return e.onload=(()=>t.resolve(e)),e.onerror=(()=>t.resolve(e)),t}}Assets.init();class Interpolation{static init(){function e(e,n,r){return((t(n,r)*e+i(n,r))*e+s(n))*e}function t(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function s(e){return 3*e}this.convertEase=(e=>(()=>{let t;switch(e){case"easeInQuad":t=this.Quad.In;break;case"easeInCubic":t=this.Cubic.In;break;case"easeInQuart":t=this.Quart.In;break;case"easeInQuint":t=this.Quint.In;break;case"easeInSine":t=this.Sine.In;break;case"easeInExpo":t=this.Expo.In;break;case"easeInCirc":t=this.Circ.In;break;case"easeInElastic":t=this.Elastic.In;break;case"easeInBack":t=this.Back.In;break;case"easeInBounce":t=this.Bounce.In;break;case"easeOutQuad":t=this.Quad.Out;break;case"easeOutCubic":t=this.Cubic.Out;break;case"easeOutQuart":t=this.Quart.Out;break;case"easeOutQuint":t=this.Quint.Out;break;case"easeOutSine":t=this.Sine.Out;break;case"easeOutExpo":t=this.Expo.Out;break;case"easeOutCirc":t=this.Circ.Out;break;case"easeOutElastic":t=this.Elastic.Out;break;case"easeOutBack":t=this.Back.Out;break;case"easeOutBounce":t=this.Bounce.Out;break;case"easeInOutQuad":t=this.Quad.InOut;break;case"easeInOutCubic":t=this.Cubic.InOut;break;case"easeInOutQuart":t=this.Quart.InOut;break;case"easeInOutQuint":t=this.Quint.InOut;break;case"easeInOutSine":t=this.Sine.InOut;break;case"easeInOutExpo":t=this.Expo.InOut;break;case"easeInOutCirc":t=this.Circ.InOut;break;case"easeInOutElastic":t=this.Elastic.InOut;break;case"easeInOutBack":t=this.Back.InOut;break;case"easeInOutBounce":t=this.Bounce.InOut;break;case"linear":t=this.Linear.None}if(!t){const i=TweenManager.getEase(e);if(i){const e=i.split("(")[1].slice(0,-1).split(",");for(let t=0;t<e.length;t++)e[t]=parseFloat(e[t]);t=e}else t=this.Cubic.Out}return t})()),this.solve=((n,r)=>n[0]===n[1]&&n[2]===n[3]?r:e(function(n,r,a){let o=n;for(let u=0;u<4;u++){const u=(l=o,3*t(h=r,c=a)*l*l+2*i(h,c)*l+s(h));if(0===u)return o;o-=(e(o,r,a)-n)/u}var l,h,c;return o}(r,n[0],n[2]),n[1],n[3])),this.Linear={None:e=>e},this.Quad={In:e=>e*e,Out:e=>e*(2-e),InOut:e=>(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},this.Cubic={In:e=>e*e*e,Out:e=>--e*e*e+1,InOut:e=>(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},this.Quart={In:e=>e*e*e*e,Out:e=>1- --e*e*e*e,InOut:e=>(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},this.Quint={In:e=>e*e*e*e*e,Out:e=>--e*e*e*e*e+1,InOut:e=>(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},this.Sine={In:e=>1-Math.cos(e*Math.PI/2),Out:e=>Math.sin(e*Math.PI/2),InOut:e=>.5*(1-Math.cos(Math.PI*e))},this.Expo={In:e=>0===e?0:Math.pow(1024,e-1),Out:e=>1===e?1:1-Math.pow(2,-10*e),InOut:e=>0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},this.Circ={In:e=>1-Math.sqrt(1-e*e),Out:e=>Math.sqrt(1- --e*e),InOut:e=>(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},this.Elastic={In(e,t=1,i=.4){let s;return 0===e?0:1===e?1:(!t||t<1?(t=1,s=i/4):s=i*Math.asin(1/t)/(2*Math.PI),-t*Math.pow(2,10*(e-=1))*Math.sin((e-s)*(2*Math.PI)/i))},Out(e,t=1,i=.4){let s;return 0===e?0:1===e?1:(!t||t<1?(t=1,s=i/4):s=i*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*e)*Math.sin((e-s)*(2*Math.PI)/i)+1)},InOut(e,t=1,i=.4){let s;return 0===e?0:1===e?1:(!t||t<1?(t=1,s=i/4):s=i*Math.asin(1/t)/(2*Math.PI),(e*=2)<1?t*Math.pow(2,10*(e-=1))*Math.sin((e-s)*(2*Math.PI)/i)*-.5:t*Math.pow(2,-10*(e-=1))*Math.sin((e-s)*(2*Math.PI)/i)*.5+1)}},this.Back={In(e){const t=1.70158;return e*e*((t+1)*e-t)},Out(e){const t=1.70158;return--e*e*((t+1)*e+t)+1},InOut(e){const t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},this.Bounce={In:e=>1-Interpolation.Bounce.Out(1-e),Out:e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,InOut:e=>e<.5?.5*Interpolation.Bounce.In(2*e):.5*Interpolation.Bounce.Out(2*e-1)+.5}}}Interpolation.init();class MathTween{constructor(e,t,i,s,n,r,a){const o=this;let l,h,c,u,d,m,p,f;function v(){if(!e&&!t)return!1;e.mathTween=null,TweenManager.removeMathTween(o),Utils.nullObject(o),e.mathTweens&&e.mathTweens.remove(o)}!function(){!e.multiTween&&e.mathTween&&TweenManager.clearTween(e);TweenManager.addMathTween(o),e.mathTween=o,e.multiTween&&(e.mathTweens||(e.mathTweens=[]),e.mathTweens.push(o));s=Interpolation.convertEase(s),u="function"==typeof s,l=performance.now(),l+=n,c=t,h={},t.spring&&(m=t.spring);t.damping&&(p=t.damping);for(let t in c)"number"==typeof e[t]&&(h[t]=e[t])}(),this.update=(e=>{if(d||e<l)return;f=(f=(e-l)/i)>1?1:f;const t=this.interpolate(f);r&&r(t),1===f&&(a&&a(),v())}),this.stop=(()=>{v()}),this.pause=(()=>{d=!0}),this.resume=(()=>{d=!1,l=performance.now()-f*i}),this.interpolate=(t=>{const i=u?s(t,m,p):Interpolation.solve(s,t);for(let s in h)if("number"==typeof h[s]&&"number"==typeof c[s]){const t=h[s],n=c[s];e[s]=t+(n-t)*i}return i})}}class TweenManager{static init(){const e=this,t=[];this.TRANSFORMS=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ","skewX","skewY","perspective"],this.CSS_EASES={easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",linear:"linear"},Render.start(function(i){for(let s=t.length-1;s>=0;s--){const n=t[s];n.update?n.update(i):e.removeMathTween(n)}}),this.addMathTween=(e=>{t.push(e)}),this.removeMathTween=(e=>{t.remove(e)}),this.tween=((e,t,i,s,n,r,a)=>{"number"!=typeof n&&(a=r,r=n,n=0);let o=null;"undefined"!=typeof Promise&&(o=Promise.create(),r&&o.then(r),r=o.resolve);const l=new MathTween(e,t,i,s,n,a,r);return o||l}),this.clearTween=(e=>{if(e.mathTween&&e.mathTween.stop(),e.mathTweens){const t=e.mathTweens;for(let e=t.length-1;e>=0;e--){const i=t[e];i&&i.stop()}e.mathTweens=null}}),this.isTransform=(e=>~this.TRANSFORMS.indexOf(e)),this.getEase=(e=>this.CSS_EASES[e]||this.CSS_EASES.easeOutCubic),this.getAllTransforms=(e=>{const t={};for(let i=0;i<this.TRANSFORMS.length;i++){const s=this.TRANSFORMS[i],n=e[s];0!==n&&"number"==typeof n&&(t[s]=n)}return t}),this.parseTransform=(e=>{let t="";if(void 0!==e.x||void 0!==e.y||void 0!==e.z){const i=e.x||0,s=e.y||0,n=e.z||0;let r="";r+=i+"px, ",r+=s+"px, ",t+="translate3d("+(r+=n+"px")+")"}return void 0!==e.scale?t+="scale("+e.scale+")":(void 0!==e.scaleX&&(t+="scaleX("+e.scaleX+")"),void 0!==e.scaleY&&(t+="scaleY("+e.scaleY+")")),void 0!==e.rotation&&(t+="rotate("+e.rotation+"deg)"),void 0!==e.rotationX&&(t+="rotateX("+e.rotationX+"deg)"),void 0!==e.rotationY&&(t+="rotateY("+e.rotationY+"deg)"),void 0!==e.rotationZ&&(t+="rotateZ("+e.rotationZ+"deg)"),void 0!==e.skewX&&(t+="skewX("+e.skewX+"deg)"),void 0!==e.skewY&&(t+="skewY("+e.skewY+"deg)"),void 0!==e.perspective&&(t+="perspective("+e.perspective+"px)"),t}),this.interpolate=((e,t,i)=>{const s=Interpolation.convertEase(i);return e*("function"==typeof s?s(t):Interpolation.solve(s,t))}),this.interpolateValues=((e,t,i,s)=>{const n=Interpolation.convertEase(s);return e+(t-e)*("function"==typeof n?n(i):Interpolation.solve(n,i))})}}TweenManager.init();class CSSTransition{constructor(e,t,i,s,n,r){const a=this;let o,l;function h(){return!a||a.kill||!e||!e.element}function c(){h()||(a.kill=!0,e.element.style.transition="",e.willChange(null),e.cssTween=null,e=t=null,Utils.nullObject(a))}this.playing=!0,function(){const i=TweenManager.getAllTransforms(e),s=[];for(let e in t)TweenManager.isTransform(e)?(i.use=!0,i[e]=t[e],delete t[e]):("number"==typeof t[e]||~e.indexOf("-"))&&s.push(e);i.use&&(s.push("transform"),delete i.use);o=i,l=s}(),function(){if(h())return;e.cssTween&&e.cssTween.stop();e.cssTween=a;const u=function(e,t,i){let s="",n="";for(let r=0;r<l.length;r++){const a=l[r];s+=(s.length?", ":"")+a,n+=(n.length?", ":"")+a+" "+e+"ms "+TweenManager.getEase(t)+" "+i+"ms"}return{props:s,transition:n}}(i,s,n);e.willChange(u.props),Timer.create(()=>{h()||(e.element.style.transition=u.transition,e.css(t),e.transform(o),Timer.create(()=>{h()||(a.playing=!1,Timer.create(()=>{h()||e.cssTween&&!e.cssTween.playing&&c()},1e3),r&&r())},i+n))},35)}(),this.stop=c}}class Interface{constructor(e,t="div",i){if(this.events=new Events,this.classes=[],this.timers=[],this.loops=[],void 0!==e){if("string"!=typeof e&&e)this.element=e;else{if(this.name=e,this.type=t,"svg"===t){const e=i||"svg";i=!0,this.element=document.createElementNS("http://www.w3.org/2000/svg",e)}else this.element=document.createElement(t),"."!==e.charAt(0)?this.element.id=e:this.element.className=e.substr(1),this.element.style.position="absolute";i||document.body.appendChild(this.element)}this.element.object=this}}initClass(e,...t){const i=new e(...t);return this.add(i),i}add(e){return e.destroy&&(this.classes.push(e),e.parent=this),e.element?this.element.appendChild(e.element):e.nodeName&&this.element.appendChild(e),this}delayedCall(e,t=0,...i){if(!this.timers)return;const s=Timer.create(()=>{e&&e(...i)},t);return this.timers.push(s),this.timers.length>50&&this.timers.shift(),s}clearTimers(){for(let e=this.timers.length-1;e>=0;e--)Timer.clearTimeout(this.timers[e]);this.timers.length=0}startRender(e,t){this.loops.push(e),Render.start(e,t)}stopRender(e){this.loops.remove(e),Render.stop(e)}clearRenders(){for(let e=this.loops.length-1;e>=0;e--)this.stopRender(this.loops[e]);this.loops.length=0}destroy(){if(!this.classes)return;this.removed=!0;const e=this.parent;e&&!e.removed&&e.remove&&e.remove(this);for(let t=this.classes.length-1;t>=0;t--){const e=this.classes[t];e&&e.destroy&&e.destroy()}return this.classes.length=0,this.element.object=null,this.clearRenders(),this.clearTimers(),this.events.destroy(),Utils.nullObject(this)}remove(e){e.element?e.element.parentNode.removeChild(e.element):e.nodeName&&e.parentNode.removeChild(e),this.classes.remove(e)}create(e,t){const i=new Interface(e,t);return this.add(i),i}clone(){return new Interface(this.element.cloneNode(!0))}empty(){return this.element.innerHTML="",this}text(e){return void 0===e?this.element.textContent:(this.element.textContent=e,this)}html(e){return void 0===e?this.element.innerHTML:(this.element.innerHTML=e,this)}hide(){return this.element.style.display="none",this}show(){return this.element.style.display="",this}visible(){return this.element.style.visibility="visible",this}invisible(){return this.element.style.visibility="hidden",this}setZ(e){return this.element.style.zIndex=e,this}clearOpacity(){return this.element.style.opacity="",this}size(e,t=e,i){return"boolean"==typeof t&&(i=t,t=e),void 0!==e&&("string"==typeof e||"string"==typeof t?("string"!=typeof e&&(e+="px"),"string"!=typeof t&&(t+="px"),this.element.style.width=e,this.element.style.height=t):(this.element.style.width=e+"px",this.element.style.height=t+"px",i||(this.element.style.backgroundSize=e+"px "+t+"px"))),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this}mouseEnabled(e){return this.element.style.pointerEvents=e?"auto":"none",this}fontStyle(e,t,i,s){return this.css({fontFamily:e,fontSize:t,color:i,fontStyle:s}),this}bg(e,t,i,s){return~e.indexOf(".")&&(e=Assets.getPath(e)),e.includes(["data:","."])?this.element.style.backgroundImage="url("+e+")":this.element.style.backgroundColor=e,void 0!==t&&(t="number"==typeof t?t+"px":t,i="number"==typeof i?i+"px":i,this.element.style.backgroundPosition=t+" "+i),s&&(this.element.style.backgroundSize="",this.element.style.backgroundRepeat=s),"cover"!==t&&"contain"!==t||(s="number"==typeof s?s+"px":s,this.element.style.backgroundSize=t,this.element.style.backgroundRepeat="no-repeat",this.element.style.backgroundPosition=void 0!==i?i+" "+s:"center"),this}center(e,t,i){const s={};return void 0===e?(s.left="50%",s.top="50%",s.marginLeft=-this.width/2,s.marginTop=-this.height/2):(e&&(s.left="50%",s.marginLeft=-this.width/2),t&&(s.top="50%",s.marginTop=-this.height/2)),i&&(delete s.left,delete s.top),this.css(s),this}mask(e){return this.element.style.mask=(~e.indexOf(".")?"url("+e+")":e)+" no-repeat",this.element.style.maskSize="contain",this}blendMode(e,t){return this.element.style[t?"background-blend-mode":"mix-blend-mode"]=e,this}css(e,t){if("object"!=typeof e){if(void 0===t){let t=this.element.style[e];return"number"!=typeof t&&(~t.indexOf("px")&&(t=Number(t.slice(0,-2))),"opacity"===e&&(t=isNaN(Number(this.element.style.opacity))?1:Number(this.element.style.opacity))),t||0}return this.element.style[e]=t,this}for(let i in e){let t=e[i];"string"!=typeof t&&"number"!=typeof t||("string"!=typeof t&&"opacity"!==i&&"zIndex"!==i&&(t+="px"),this.element.style[i]=t)}return this}transform(e){if(e)for(let t in e)"number"==typeof e[t]&&(this[t]=e[t]);else e=this;return this.element.style.transform=TweenManager.parseTransform(e),this}willChange(e){const t="string"==typeof e;this.element.style.willChange=e?t?e:"transform, opacity":""}backfaceVisibility(e){return this.element.style.backfaceVisibility=e?"visible":"hidden",this}enable3D(e,t,i){return this.element.style.transformStyle="preserve-3d",e&&(this.element.style.perspective=e+"px"),void 0!==t&&(t="number"==typeof t?t+"px":t,i="number"==typeof i?i+"px":i,this.element.style.perspectiveOrigin=t+" "+i),this}disable3D(){return this.element.style.transformStyle="",this.element.style.perspective="",this}transformPoint(e,t,i){let s="";return void 0!==e&&(s+="number"==typeof e?e+"px":e),void 0!==t&&(s+="number"==typeof t?" "+t+"px":" "+t),void 0!==i&&(s+="number"==typeof i?" "+i+"px":" "+i),this.element.style.transformOrigin=s,this}tween(e,t,i,s,n){"number"!=typeof s&&(n=s,s=0);let r=null;"undefined"!=typeof Promise&&(r=Promise.create(),n&&r.then(n),n=r.resolve);const a=new CSSTransition(this,e,t,i,s,n);return r||a}clearTransform(){return"number"==typeof this.x&&(this.x=0),"number"==typeof this.y&&(this.y=0),"number"==typeof this.z&&(this.z=0),"number"==typeof this.scale&&(this.scale=1),"number"==typeof this.scaleX&&(this.scaleX=1),"number"==typeof this.scaleY&&(this.scaleY=1),"number"==typeof this.rotation&&(this.rotation=0),"number"==typeof this.rotationX&&(this.rotationX=0),"number"==typeof this.rotationY&&(this.rotationY=0),"number"==typeof this.rotationZ&&(this.rotationZ=0),"number"==typeof this.skewX&&(this.skewX=0),"number"==typeof this.skewY&&(this.skewY=0),this.element.style.transform="",this}clearTween(){return this.cssTween&&this.cssTween.stop(),this.mathTween&&this.mathTween.stop(),this}attr(e,t){if("object"!=typeof e)return void 0===t?this.element.getAttribute(e):(""===t?this.element.removeAttribute(e):this.element.setAttribute(e,t),this);for(let i in e){const t=e[i];"string"!=typeof t&&"number"!=typeof t||this.element.setAttribute(i,t)}return this}convertTouchEvent(e){const t={x:0,y:0};return e?(e.touches||e.changedTouches?e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.changedTouches[0].pageX,t.y=e.changedTouches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t):t}click(e){return this.element.addEventListener("click",t=>{if(!this.element)return!1;t.object="hit"===this.element.className?this.parent:this,t.action="click",e&&e(t)},!0),this.element.style.cursor="pointer",this}hover(e){const t=t=>{if(!this.element)return!1;t.object="hit"===this.element.className?this.parent:this,t.action="mouseout"===t.type?"out":"over",e&&e(t)};return this.element.addEventListener("mouseover",t,!0),this.element.addEventListener("mouseout",t,!0),this}bind(e,t){"touchstart"!==e||Device.mobile?"touchmove"!==e||Device.mobile?"touchend"!==e||Device.mobile||(e="mouseup"):e="mousemove":e="mousedown",this.events["bind_"+e]||(this.events["bind_"+e]=[]);const i=this.events["bind_"+e];i.push({target:this.element,callback:t});const s=e=>{const t=this.convertTouchEvent(e);e instanceof MouseEvent||(e.x=t.x,e.y=t.y),i.forEach(t=>{t.target===e.currentTarget&&t.callback(e)})};return this.events["fn_"+e]||(this.events["fn_"+e]=s,this.element.addEventListener(e,s,!0)),this}unbind(e,t){"touchstart"!==e||Device.mobile?"touchmove"!==e||Device.mobile?"touchend"!==e||Device.mobile||(e="mouseup"):e="mousemove":e="mousedown";const i=this.events["bind_"+e];return i?(i.forEach((e,s)=>{e.callback===t&&i.splice(s,1)}),this.events["fn_"+e]&&!i.length&&(this.element.removeEventListener(e,this.events["fn_"+e],!0),this.events["fn_"+e]=null),this):this}interact(e,t){return this.hit=this.create(".hit"),this.hit.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:99999}),Device.mobile?this.hit.touchClick(e,t):this.hit.hover(e).click(t),this}touchClick(e,t){const i={};let s,n,r;const a=e=>{const t=this.convertTouchEvent(e);e.touchX=t.x,e.touchY=t.y,i.x=e.touchX,i.y=e.touchY};return this.element.addEventListener("touchmove",e=>{if(!this.element)return!1;r=this.convertTouchEvent(e),n=((e,t)=>{const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)})(i,r)>5},{passive:!0}),this.element.addEventListener("touchstart",t=>{if(!this.element)return!1;s=performance.now(),t.object="hit"===this.element.className?this.parent:this,t.action="over",a(t),e&&!n&&e(t)},{passive:!0}),this.element.addEventListener("touchend",i=>{if(!this.element)return!1;const r=performance.now();i.object="hit"===this.element.className?this.parent:this,a(i),s&&r-s<750&&t&&!n&&(i.action="click",t(i)),e&&(i.action="out",e(i)),n=!1},{passive:!0}),this}touchSwipe(e,t=75){const i={};let s,n,r=!1;const a=e=>{const t=this.convertTouchEvent(e);1===e.touches.length&&(s=t.x,n=t.y,r=!0,this.element.addEventListener("touchmove",o,{passive:!0}))},o=a=>{if(r){const r=this.convertTouchEvent(a),o=s-r.x,h=n-r.y;i.direction=null,i.moving=null,i.x=null,i.y=null,i.evt=a,Math.abs(o)>=t?(l(),i.direction=o>0?"left":"right"):Math.abs(h)>=t?(l(),i.direction=h>0?"up":"down"):(i.moving=!0,i.x=o,i.y=h),e&&e(i,a)}},l=()=>{s=n=r=!1,this.element.removeEventListener("touchmove",o)};return Device.mobile&&(this.element.addEventListener("touchstart",a,{passive:!0}),this.element.addEventListener("touchend",l,{passive:!0}),this.element.addEventListener("touchcancel",l,{passive:!0})),this}overflowScroll(e){const t=!!e.x,i=!!e.y,s={};(!t&&!i||t&&i)&&(s.overflow="scroll"),!t&&i&&(s.overflowY="scroll",s.overflowX="hidden"),t&&!i&&(s.overflowX="scroll",s.overflowY="hidden"),Device.mobile&&(s["-webkit-overflow-scrolling"]="touch",this.element.scrollParent=!0,this.element.preventEvent=(e=>e.stopPropagation()),this.bind("touchmove",this.element.preventEvent)),this.css(s)}removeOverflowScroll(){this.css({overflow:"hidden",overflowX:"",overflowY:"","-webkit-overflow-scrolling":""}),Device.mobile&&this.unbind("touchmove",this.element.preventEvent)}split(e=""){const t={position:"relative",display:"inline-block",width:"auto",height:"auto",margin:0,padding:0},i=[],s=this.text().split(e);this.empty()," "===e&&(e="&nbsp;");for(let n=0;n<s.length;n++)" "===s[n]&&(s[n]="&nbsp;"),i.push(this.create(".t","span").html(s[n]).css(t)),""!==e&&n<s.length-1&&i.push(this.create(".t","span").html(e).css(t));return i}}const Stage=new class extends Interface{constructor(){super("Stage");const e=this;let t;function i(){"focus"!==t&&(t="focus",Events.emitter.fire(Events.VISIBILITY,{type:"focus"}))}function s(){"blur"!==t&&(t="blur",Events.emitter.fire(Events.VISIBILITY,{type:"blur"}))}function n(e){Events.emitter.fire(Events.KEYBOARD_DOWN,e)}function r(e){Events.emitter.fire(Events.KEYBOARD_UP,e)}function a(e){Events.emitter.fire(Events.KEYBOARD_PRESS,e)}function o(t){e.size(),e.orientation=window.innerWidth>window.innerHeight?"landscape":"portrait",Events.emitter.fire(Events.RESIZE,t)}function l(e){let t=e.target;if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName||"SELECT"===t.nodeName||"A"===t.nodeName)return;let i=!0;for(;t.parentNode&&i;)t.scrollParent&&(i=!1),t=t.parentNode;i&&e.preventDefault()}e.css({overflow:"hidden"}),function(){window.addEventListener("focus",i),window.addEventListener("blur",s),window.addEventListener("keydown",n),window.addEventListener("keyup",r),window.addEventListener("keypress",a),window.addEventListener("resize",o),window.addEventListener("orientationchange",o),Device.mobile&&window.addEventListener("touchstart",l,{passive:!1});o()}(),this.allowScroll=(()=>{Device.mobile&&window.removeEventListener("touchstart",l,{passive:!1})}),this.destroy=(()=>(this.Accelerometer&&this.Accelerometer.active&&this.Accelerometer.stop(),this.Mouse&&this.Mouse.active&&this.Mouse.stop(),this.WebAudio&&this.WebAudio.active&&this.WebAudio.stop(),window.removeEventListener("focus",i),window.removeEventListener("blur",s),window.removeEventListener("keydown",n),window.removeEventListener("keyup",r),window.removeEventListener("keypress",a),window.removeEventListener("resize",o),window.removeEventListener("orientationchange",o),Device.mobile&&window.removeEventListener("touchstart",l,{passive:!1}),super.destroy()))}};class AssetLoader extends Component{constructor(e,t){Array.isArray(e)&&(e=e.map(e=>Utils.basename(e)).reduce((t,i,s)=>(t[i]=e[s],t),{})),super();const i=this;let s=Object.keys(e).length,n=0;for(let o in e)r(o,e[o]);function r(e,t){const i=Utils.extension(t);if(!i.includes(["jpg","jpeg","png","gif","svg"]))return i.includes(["mp3","m4a","ogg","wav","aif"])?window.AudioContext&&Stage.WebAudio?void Stage.WebAudio.createSound(e,t,a):a():void window.get(Assets.getPath(t),Assets.OPTIONS).then(t=>{"json"===i&&Assets.storeData(e,t),"js"===i&&window.eval(t.replace("use strict","")),a()}).catch(()=>{a()});Assets.createImage(t,a)}function a(){i.percent=++n/s,i.events.fire(Events.PROGRESS,{percent:i.percent},!0),n===s&&(i.events.fire(Events.COMPLETE,null,!0),t&&t())}this.add=((e=1)=>{s+=e}),this.trigger=((e=1)=>{for(let t=0;t<e;t++)a()})}static loadAssets(e,t){const i=Promise.create();return t||(t=i.resolve),i.loader=new AssetLoader(e,t),i}}class FontLoader extends Component{constructor(e,t){e=e.map(e=>"object"!=typeof e?{style:"normal",variant:"normal",weight:"normal",family:e.replace(/"/g,"'")}:e),super();const i=this;let s,n=0;function r(e){s.font=e,s.fillText("LOAD",0,0)}function a(){i.percent=++n/e.length,i.events.fire(Events.PROGRESS,{percent:i.percent},!0),n===e.length&&(i.events.fire(Events.COMPLETE,null,!0),t&&t())}s=document.createElement("canvas").getContext("2d"),e.forEach(e=>{e.specifier=(({style:e="normal",variant:t="normal",weight:i="normal",family:s})=>`${e} ${t} ${i} 12px "${s}"`)(e)}),document.fonts?e.forEach(e=>{document.fonts.load(e.specifier).then(()=>{r(e.specifier),a()}).catch(()=>{a()})}):(e.forEach(e=>r(e.specifier)),i.delayedCall(()=>{i.percent=1,i.events.fire(Events.PROGRESS,{percent:i.percent},!0),i.events.fire(Events.COMPLETE,null,!0),t&&t()},500))}static loadFonts(e,t){const i=Promise.create();return t||(t=i.resolve),i.loader=new FontLoader(e,t),i}}window.AudioContext||(window.AudioContext=window.webkitAudioContext||window.mozAudioContext||window.oAudioContext);class CanvasValues{constructor(e){this.styles={},e?this.styled=!1:this.data=new Float32Array(6)}setTRSA(e,t,i,s,n,r){const a=this.data;a[0]=e,a[1]=t,a[2]=i,a[3]=s,a[4]=n,a[5]=r}calculate(e){const t=e.data,i=this.data;i[0]=i[0]+t[0],i[1]=i[1]+t[1],i[2]=i[2]+t[2],i[3]=i[3]*t[3],i[4]=i[4]*t[4],i[5]=i[5]*t[5]}calculateStyle(e){if(!e.styled)return!1;this.styled=!0;const t=e.values;for(let i in t)this.styles[i]||(this.styles[i]=t[i])}set shadowOffsetX(e){this.styled=!0,this.styles.shadowOffsetX=e}get shadowOffsetX(){return this.styles.shadowOffsetX}set shadowOffsetY(e){this.styled=!0,this.styles.shadowOffsetY=e}get shadowOffsetY(){return this.styles.shadowOffsetY}set shadowBlur(e){this.styled=!0,this.styles.shadowBlur=e}get shadowBlur(){return this.styles.shadowBlur}set shadowColor(e){this.styled=!0,this.styles.shadowColor=e}get shadowColor(){return this.styles.shadowColor}get values(){return this.styles}}class CanvasObject{constructor(){this.visible=!0,this.blendMode="source-over",this.x=0,this.y=0,this.px=0,this.py=0,this.clipX=0,this.clipY=0,this.clipWidth=0,this.clipHeight=0,this.width=0,this.height=0,this.rotation=0,this.scale=1,this.opacity=1,this.values=new CanvasValues,this.styles=new CanvasValues(!0),this.children=[]}updateValues(){this.values.setTRSA(this.x,this.y,Math.radians(this.rotation),this.scaleX||this.scale,this.scaleY||this.scale,this.opacity),this.parent.values&&this.values.calculate(this.parent.values),this.parent.styles&&this.styles.calculateStyle(this.parent.styles)}render(e){if(!this.visible)return!1;this.updateValues(),this.draw&&this.draw(e);for(let t=0;t<this.children.length;t++)this.children[t].render(e)}startDraw(e=0,t=0,i){const s=this.canvas.context,n=this.values.data,r=n[0]+e,a=n[1]+t;if(s.save(),i||(s.globalCompositeOperation=this.blendMode),s.translate(r,a),s.rotate(n[2]),s.scale(n[3],n[4]),s.globalAlpha=n[5],this.styles.styled){const e=this.styles.values;for(let t in e)s[t]=e[t]}}endDraw(){this.canvas.context.restore()}add(e){e.setCanvas(this.canvas),e.parent=this,this.children.push(e),e.z=this.children.length}setCanvas(e){this.canvas=e;for(let t=0;t<this.children.length;t++)this.children[t].setCanvas(e)}remove(e){e.canvas=null,e.parent=null,this.children.remove(e)}isMask(){let e=this;for(;e;){if(e.masked)return!0;e=e.parent}return!1}unmask(){this.masked.mask(null),this.masked=null}setZ(e){this.z=e,this.parent.children.sort((e,t)=>e.z-t.z)}follow(e){return this.x=e.x,this.y=e.y,this.px=e.px,this.py=e.py,this.clipX=e.clipX,this.clipY=e.clipY,this.clipWidth=e.clipWidth,this.clipHeight=e.clipHeight,this.width=e.width,this.height=e.height,this.rotation=e.rotation,this.scale=e.scale,this.scaleX=e.scaleX||e.scale,this.scaleY=e.scaleY||e.scale,this}visible(){return this.visible=!0,this}invisible(){return this.visible=!1,this}transform(e){for(let t in e)"number"==typeof e[t]&&(this[t]=e[t]);return this}transformPoint(e,t){return this.px="number"==typeof e?e:this.width*(parseFloat(e)/100),this.py="number"==typeof t?t:this.height*(parseFloat(t)/100),this}clip(e,t,i,s){return this.clipX=e,this.clipY=t,this.clipWidth=i,this.clipHeight=s,this}destroy(){if(this.children)for(let e=this.children.length-1;e>=0;e--)this.children[e].destroy();return Utils.nullObject(this)}}class CanvasGraphics extends CanvasObject{constructor(e=0,t=e){super();const i=this;let s,n=[];this.width=e,this.height=t,this.props={},this.draw=(e=>{if(this.isMask()&&!e)return!1;const t=this.canvas.context;this.startDraw(this.px,this.py,e),function(e){for(let t in i.props)e[t]=i.props[t]}(t),this.clipWidth&&this.clipHeight&&(t.beginPath(),t.rect(this.clipX,this.clipY,this.clipWidth,this.clipHeight),t.clip());for(let i=0;i<n.length;i++){const e=n[i];if(!e)continue;const s=e.shift();t[s].apply(t,e),e.unshift(s)}this.endDraw(),s&&(t.globalCompositeOperation=s.blendMode,s.render(!0))}),this.clear=(()=>{for(let e=n.length-1;e>=0;e--)n[e].length=0;n.length=0}),this.arc=((e=0,t=0,i=this.radius||this.width/2,s=0,r=2*Math.PI,a=!1)=>{e&&!t&&(s=Math.radians(-90),r=e,e=0,t=0),n.push(["arc",e,t,i,s,r,a])}),this.quadraticCurveTo=((e,t,i,s)=>{n.push(["quadraticCurveTo",e,t,i,s])}),this.bezierCurveTo=((e,t,i,s,r,a)=>{n.push(["bezierCurveTo",e,t,i,s,r,a])}),this.fillRect=((e,t,i,s)=>{n.push(["fillRect",e,t,i,s])}),this.clearRect=((e,t,i,s)=>{n.push(["clearRect",e,t,i,s])}),this.strokeRect=((e,t,i,s)=>{n.push(["strokeRect",e,t,i,s])}),this.moveTo=((e,t)=>{n.push(["moveTo",e,t])}),this.lineTo=((e,t)=>{n.push(["lineTo",e,t])}),this.stroke=(()=>{n.push(["stroke"])}),this.fill=(()=>{s||n.push(["fill"])}),this.beginPath=(()=>{n.push(["beginPath"])}),this.closePath=(()=>{n.push(["closePath"])}),this.fillText=((e,t=0,i=0)=>{n.push(["fillText",e,t,i])}),this.strokeText=((e,t=0,i=0)=>{n.push(["strokeText",e,t,i])}),this.setLineDash=(e=>{n.push(["setLineDash",e])}),this.drawImage=((e,t=0,i=0,s=e.width,r=e.height,a=0,o=0,l=e.width,h=e.height)=>{n.push(["drawImage",e,t,i,s,r,a+-this.px,o+-this.py,l,h])}),this.mask=(e=>{if(!e)return s=null;s=e,e.masked=this;for(let t=0;t<n.length;t++)"fill"!==n[t][0]&&"stroke"!==n[t][0]||(n[t].length=0,n.splice(t,1))}),this.clone=(()=>{const e=new CanvasGraphics(this.width,this.height);return e.visible=this.visible,e.blendMode=this.blendMode,e.opacity=this.opacity,e.follow(this),e.props=Utils.cloneObject(this.props),e.setDraw(Utils.cloneArray(n)),e}),this.setDraw=(e=>{n=e})}set strokeStyle(e){this.props.strokeStyle=e}get strokeStyle(){return this.props.strokeStyle}set fillStyle(e){this.props.fillStyle=e}get fillStyle(){return this.props.fillStyle}set lineWidth(e){this.props.lineWidth=e}get lineWidth(){return this.props.lineWidth}set lineCap(e){this.props.lineCap=e}get lineCap(){return this.props.lineCap}set lineDashOffset(e){this.props.lineDashOffset=e}get lineDashOffset(){return this.props.lineDashOffset}set lineJoin(e){this.props.lineJoin=e}get lineJoin(){return this.props.lineJoin}set miterLimit(e){this.props.miterLimit=e}get miterLimit(){return this.props.miterLimit}set font(e){this.props.font=e}get font(){return this.props.font}set textAlign(e){this.props.textAlign=e}get textAlign(){return this.props.textAlign}set textBaseline(e){this.props.textBaseline=e}get textBaseline(){return this.props.textBaseline}}class Canvas{constructor(e,t=e,i,s){"boolean"==typeof t&&(i=t,t=e);const n=this;function r(e,t=e){const r=i?2:1;if(n.element.width=e*r,n.element.height=t*r,n.width=e,n.height=t,n.scale=r,n.object.size(n.width,n.height),n.context.scale(r,r),n.element.style.width=e+"px",n.element.style.height=t+"px",s){const e=new CanvasGraphics(n.width,n.height);e.fillStyle="rgba(255, 255, 255, 0.002)",e.fillRect(0,0,n.width,n.height),e.setCanvas(n),e.parent=n,n.children[0]=e,e.z=1}}this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.object=new Interface(this.element),this.children=[],this.retina=i,r(e,t),this.size=r,this.toDataURL=((e,t)=>this.element.toDataURL(e,t)),this.render=(e=>{"boolean"==typeof e&&e||this.clear();for(let t=0;t<this.children.length;t++)this.children[t].render()}),this.clear=(()=>{this.context.clearRect(0,0,this.element.width,this.element.height)}),this.add=(e=>{e.setCanvas(this),e.parent=this,this.children.push(e),e.z=this.children.length}),this.remove=(e=>{e.canvas=null,e.parent=null,this.children.remove(e)}),this.destroy=(()=>{if(this.children)for(let e=this.children.length-1;e>=0;e--)this.children[e].destroy();return this.object.destroy(),Utils.nullObject(this)}),this.getImageData=((e=0,t=0,i=this.element.width,s=this.element.height)=>(this.imageData=this.context.getImageData(e,t,i,s),this.imageData)),this.getPixel=((e,t,i)=>{this.imageData&&!i||this.getImageData();const s={},n=4*(e+t*this.element.width),r=this.imageData.data;return s.r=r[n],s.g=r[n+1],s.b=r[n+2],s.a=r[n+3],s}),this.putImageData=(e=>{this.context.putImageData(e,0,0)})}}class CanvasTexture extends CanvasObject{constructor(e,t=0,i=t){super();const s=this;let n;function r(){s.onload&&s.onload(),s.width||s.height||(s.width=s.texture.width,s.height=s.texture.height)}this.width=t,this.height=i,"string"==typeof e?Assets.loadImage(e).then(e=>{s.texture=e,r()}):(s.texture=e,r()),this.draw=(e=>{if(this.isMask()&&!e)return!1;const t=this.canvas.context;this.texture&&(this.startDraw(this.px,this.py,e),t.drawImage(this.texture,-this.px,-this.py,this.width,this.height),this.endDraw()),n&&(t.globalCompositeOperation="source-in",n.render(!0),t.globalCompositeOperation="source-over")}),this.mask=(e=>{if(!e)return n=null;n=e,e.masked=this})}}navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);class Utils3D{static decompose(e,t){e.matrixWorld.decompose(t.position,t.quaternion,t.scale)}static createDebug(e=40,t){const i=new THREE.IcosahedronGeometry(e,1),s=t?new THREE.MeshBasicMaterial({color:t}):new THREE.MeshNormalMaterial;return new THREE.Mesh(i,s)}static createRT(e,t){const i={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1};return new THREE.WebGLRenderTarget(e,t,i)}static getTexture(e){if(this.textures||(this.textures={}),!this.textures[e]){const t=Assets.createImage(e),i=new THREE.Texture(t);t.onload=(()=>{i.needsUpdate=!0,i.onload&&(i.onload(),i.onload=null),THREE.Math.isPowerOfTwo(t.width*t.height)||(i.minFilter=THREE.LinearFilter)}),this.textures[e]=i}return this.textures[e]}static setInfinity(e){const t=Number.POSITIVE_INFINITY;return e.set(t,t,t),e}static freezeMatrix(e){e.matrixAutoUpdate=!1,e.updateMatrix()}static getCubemap(e){const t="cube_"+(Array.isArray(e)?e[0]:e);if(this.textures||(this.textures={}),!this.textures[t]){const i=[];for(let s=0;s<6;s++){const n=Assets.createImage(Array.isArray(e)?e[s]:e);i.push(n),n.onload=(()=>this.textures[t].needsUpdate=!0)}this.textures[t]=new THREE.Texture(i),this.textures[t].minFilter=THREE.LinearFilter}return this.textures[t]}static loadObject(e){return this.objectLoader||(this.objectLoader=new THREE.ObjectLoader),this.objectLoader.parse(e)}static loadGeometry(e){return this.geomLoader||(this.geomLoader=new THREE.JSONLoader),this.bufferGeomLoader||(this.bufferGeomLoader=new THREE.BufferGeometryLoader),"BufferGeometry"===e.type?this.bufferGeomLoader.parse(e):this.geomLoader.parse(e.data).geometry}static disposeAllTextures(){for(let e in this.textures)this.textures[e].dispose()}static loadBufferGeometry(e){const t=new THREE.BufferGeometry;return e.data&&(e=e.data),t.addAttribute("position",new THREE.BufferAttribute(new Float32Array(e.position),3)),t.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(e.normal||e.position.length),3)),t.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(e.uv||e.position.length/3*2),2)),t}static loadSkinnedGeometry(e){const t=new THREE.BufferGeometry;return t.addAttribute("position",new THREE.BufferAttribute(new Float32Array(e.position),3)),t.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(e.normal),3)),t.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(e.uv),2)),t.addAttribute("skinIndex",new THREE.BufferAttribute(new Float32Array(e.skinIndices),4)),t.addAttribute("skinWeight",new THREE.BufferAttribute(new Float32Array(e.skinWeights),4)),t.bones=e.bones,t}static loadCurve(e){const t=[];for(let i=0;i<e.length;i+=3)t.push(new THREE.Vector3(e[i+0],e[i+1],e[i+2]));return new THREE.CatmullRomCurve3(t)}static setLightCamera(e,t,i,s,n){e.shadow.camera.left=-t,e.shadow.camera.right=t,e.shadow.camera.top=t,e.shadow.camera.bottom=-t,e.castShadow=!0,i&&(e.shadow.camera.near=i),s&&(e.shadow.camera.far=s),n&&(e.shadow.mapSize.width=e.shadow.mapSize.height=n),e.shadow.camera.updateProjectionMatrix()}static getRepeatTexture(e){const t=this.getTexture(e);return t.onload=(()=>t.wrapS=t.wrapT=THREE.RepeatWrapping),t}static loadTexture(e){const t=this.getTexture(e),i=Promise.create();return t.onload=(()=>i.resolve(t)),i}}class Shader extends Component{constructor(e,t,i){super();const s=this;function n(e,t){let i;return(e=(i="vs"===t?["precision highp float;","precision highp int;","attribute vec2 uv;","attribute vec3 position;","attribute vec3 normal;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 modelMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;"].join("\n"):[~e.indexOf("dFdx")?"#extension GL_OES_standard_derivatives : enable":"","precision highp float;","precision highp int;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 modelMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;"].join("\n"))+"\n\n"+e).replace(/#s?chunk\(\s?(\w+)\s?\);/g,(e,t)=>THREE.ShaderChunk[t]+"\n")}this.uniforms={},this.properties={},function(){for(let e in i)void 0!==i[e].value?s.uniforms[e]=i[e]:s.properties[e]=i[e]}(),function(){const i={};i.vertexShader=n(e,"vs"),i.fragmentShader=n(t,"fs"),i.uniforms=s.uniforms;for(let e in s.properties)i[e]=s.properties[e];s.material=new THREE.RawShaderMaterial(i),s.material.shader=s,s.uniforms=s.material.uniforms}(),this.destroy=(()=>(this.material.dispose(),super.destroy()))}}class Effects extends Component{constructor(e,t){super();const i=this;let s,n,r,a,o;function l(){s.setSize(i.stage.width*i.dpr,i.stage.height*i.dpr),n.setSize(i.stage.width*i.dpr,i.stage.height*i.dpr)}this.stage=e,this.renderer=t.renderer,this.scene=t.scene,this.camera=t.camera,this.enabled=!1!==t.enabled,this.passes=t.passes||[],this.dpr=t.dpr||1,this.rt=t.rt,s=Utils3D.createRT(i.stage.width*i.dpr,i.stage.height*i.dpr),n=Utils3D.createRT(i.stage.width*i.dpr,i.stage.height*i.dpr),r=new THREE.Scene,a=new THREE.OrthographicCamera(-1,1,1,-1,0,1),o=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2)),r.add(o),i.events.add(Events.RESIZE,l),this.add=((e,t)=>{"number"!=typeof t?this.passes.push(e):this.passes.splice(t,0,e)}),this.remove=(e=>{"number"==typeof e?this.passes.splice(e):this.passes.remove(e)}),this.render=(e=>{if(this.enabled&&this.passes.length){this.renderer.render(this.scene,this.camera,s,!0);for(let e=0;e<this.passes.length-1;e++){o.material=this.passes[e].material,o.material.uniforms.texture.value=s.texture,this.renderer.render(r,a,n);const t=s;s=n,n=t}o.material=this.passes[this.passes.length-1].material,o.material.uniforms.texture.value=s.texture,this.renderer.render(r,a,e||this.rt)}else this.renderer.render(this.scene,this.camera,e||this.rt)}),this.setSize=((e,t)=>{this.events.remove(Events.RESIZE,l),s.setSize(e*this.dpr,t*this.dpr),n.setSize(e*this.dpr,t*this.dpr)}),this.destroy=(()=>(r.remove(o),o.geometry.dispose(),o.material.dispose(),s.dispose(),n.dispose(),s=null,n=null,o=null,a=null,r=null,super.destroy()))}}Config.UI_OFFSET=Device.phone?20:80,Config.ASSETS=["assets/js/lib/three.min.js"],Config.PAGES=[{config:[{view:"NavPage"},{view:"GridPage"}],overflow:!0}],Events.PAGE_CHANGE="page_change",Events.GLITCH_IN="glitch_in",Events.GLITCH_OUT="glitch_out",Events.GLITCH_LOADER="glitch_loader",TweenManager.CSS_EASES.wipe=Device.mobile?"cubic-bezier(0.210, 0.280, 0.170, 1.000)":"cubic-bezier(0.410, 0.250, 0.080, 1.000)";var vertBasicShader="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragBasicShader="#define GLSLIFY 1\nuniform float time;\nuniform vec2 resolution;\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec2 vUv;\n\nvoid main() {\n    vec4 color = texture2D(texture, vUv);\n    color.a *= opacity;\n    gl_FragColor = color;\n}\n",vertBadTV="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    gl_Position = vec4(position, 1.0);\n}\n",fragBadTV="#define GLSLIFY 1\nuniform float time;\nuniform vec2 resolution;\nuniform sampler2D texture;\nuniform float distortion;\nuniform float distortion2;\n\nvarying vec2 vUv;\n\n// Based on https://github.com/CODAME/clonicoptics-video-capture by CODAME\n\nconst float speed = 0.5;\nconst float rollSpeed = 0.0;\n\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat snoise(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289(i); // Avoid truncation effects in permutation\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n    + i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\nvec4 getBadTV(sampler2D tDiffuse, vec2 uv, float uTime, float distortion, float distortion2) {\n    vec2 p = uv;\n    float ty = uTime * speed;\n    float yt = p.y - ty;\n\n    // smooth distortion\n    float offset = snoise(vec2(yt * 3.0, 0.0)) * 0.2;\n\n    // boost distortion\n    offset = pow(offset * distortion, 3.0) / distortion;\n\n    // add fine grain distortion\n    offset += snoise(vec2(yt * 50.0, 0.0)) * distortion2 * 0.001;\n\n    // combine distortion on X with roll on Y\n    return texture2D(tDiffuse, vec2(fract(p.x + offset), fract(p.y - uTime * rollSpeed)));\n}\n\nvoid main() {\n    gl_FragColor = getBadTV(texture, vUv, time, distortion, distortion2);\n}\n",vertRGB="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    gl_Position = vec4(position, 1.0);\n}\n",fragRGB="#define GLSLIFY 1\nuniform float time;\nuniform vec2 resolution;\nuniform sampler2D texture;\nuniform float distortion;\n\nvarying vec2 vUv;\n\n// Based on https://github.com/CODAME/clonicoptics-video-capture by CODAME\n\nvec4 getRGB(sampler2D tDiffuse, vec2 uv, float angle, float amount) {\n    vec2 offset = vec2(cos(angle), sin(angle)) * amount;\n    vec4 r = texture2D(tDiffuse, uv + offset);\n    vec4 g = texture2D(tDiffuse, uv);\n    vec4 b = texture2D(tDiffuse, uv - offset);\n    return vec4(r.r, g.g, b.b, g.a);\n}\n\nvoid main() {\n    //float angle = 3.14159;\n    //float angle = time * 0.1;\n    float angle = length(vUv - vec2(0.5));\n    //float amount = 0.3;\n    //float amount = cos(time) * 0.02;\n    //float amount = (0.002 * cos(time)) + 0.0002;\n    float amount = (distortion * cos(time)) + 0.0002;\n    gl_FragColor = getRGB(texture, vUv, angle, amount);\n}\n";class GridPage extends Interface{constructor(){super("GridPage"),this.css({position:"relative",display:"block"}),this.resize=(()=>{this.size("100%",window.innerHeight)}),this.animateIn=(e=>{this.events.fire(Events.GLITCH_IN,e)}),this.animateOut=(e=>{this.events.fire(Events.GLITCH_OUT,e)})}}window.GridPage=GridPage;class NavLink extends Interface{constructor(e){super(".NavLink");const t=this;let i,s,n,r;function a(e){"over"===e.action?r.tween({x:10},200,"easeOutCubic"):r.tween({x:0},200,"easeOutCubic")}function o(e){getURL(e.object.link)}!function(){t.size("100%","auto"),t.css({position:"relative",marginBottom:e.group?30:15}),(i=t.create(".container")).css({position:"relative",display:"inline-block"}),(e.group||e.title)&&((s=i.create(".title")).fontStyle("Neue Haas Grotesk",e.group?18.5:13.5,e.group?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 1)"),s.css({position:"relative",fontWeight:"bold",lineHeight:"1.2"}),s.html(e.group?e.group:e.title));e.description&&((n=i.create(".description")).fontStyle("Neue Haas Grotesk",e.title?12.5:13.5,"rgba(255, 255, 255, 1)"),n.css({position:"relative",display:"inline-block",fontWeight:"normal",lineHeight:"1.2"}),n.html(e.description),e.link&&((r=n.create(".line")).css({position:"relative",display:Device.phone?"block":"inline-block"}),r.html(Device.phone?"":"&nbsp;"),i.interact(a,o),i.link=e.link))}()}}class NavLinks extends Interface{constructor(){super("NavLinks");const e=this,t=[];function i(i){t.push(e.initClass(NavLink,i))}e.size("100%"),e.css({height:"",position:"relative",display:"block"}),Assets.getData("config").forEach(i),t.forEach((e,t)=>e.transform({y:50}).css({opacity:0}).tween({y:0,opacity:1},1e3,"easeOutCubic",3500+80*t))}}class NavTitle extends Interface{constructor(){super("NavTitle");const e=this;let t,i;e.size("100%","auto"),e.css({position:"relative"}),(t=e.create(".title")).size("100%","auto"),t.fontStyle("Neue Haas Grotesk",37,"rgba(255, 255, 255, 0.9)"),t.css({position:"relative",fontWeight:"bold",lineHeight:"1.1",marginBottom:60}),t.text("Hello, Im Patrick, a Web 3.0 technologist based in Toronto, Canada."),(i=t.split(" ")).forEach((e,t)=>{e.css({overflow:"hidden"}),(e=e.split(" ")[0]).transform({y:50}).tween({y:0},1e3,"easeOutCubic",500+80*t)})}}class NavPage extends Interface{constructor(){super("NavPage");const e=this;e.size(Device.phone?"auto":"55%"),e.css({height:"",position:"relative",display:"block",marginLeft:Device.phone?Config.UI_OFFSET-5:Config.UI_OFFSET,marginTop:Device.phone?Config.UI_OFFSET:Config.UI_OFFSET-5,marginRight:Device.phone?Config.UI_OFFSET+5:0}),e.initClass(NavTitle),e.initClass(NavLinks),this.resize=(()=>{}),this.animateIn=(()=>{}),this.animateOut=(()=>{})}}window.NavPage=NavPage;class PageView extends Interface{constructor(e){super("PageView");const t=this;let i;t.size("100%","auto"),t.css({position:"relative",overflow:"hidden"}),i=t.initClass(window[e.view],e),this.resize=(()=>{e.overflow||this.size("100%",window.innerHeight),i.resize&&i.resize()}),this.animateIn=(e=>{this.isVisible||(this.isVisible=!0,i.animateIn&&i.animateIn(e))}),this.animateOut=(e=>{this.isVisible&&(this.isVisible=!1,i.animateOut&&i.animateOut(e))})}}class Page extends Interface{constructor(e){super("Page");const t=this;let i,s=0,n=0,r=0;function a(){!function(){const e=document.scrollingElement||document.documentElement,a=e.scrollTop+window.innerHeight;s=e.scrollTop,r=s-n,n=s;for(let s=0;s<i.length;s++){const e=i[s].element.offsetTop,n=a-e,o=e+2*window.innerHeight;if(a>e&&a<o){const e=n/(2*window.innerHeight);e>.25&&e<.75?(i[s].isVisible||i[s].animateIn(r),t.index=s):i[s].isVisible&&i[s].animateOut(r)}}}()}function o(){t.height=t.inner.element.offsetHeight,t.css({height:t.height});let e=t.parent;for(;e;)e.css({height:t.height}),e=e.parent}t.size("100%"),t.inner=t.create(".inner"),t.inner.size("100%","auto"),t.inner.css({position:"relative",display:"block"}),function(){i=[];for(let s=0;s<e.config.length;s++){e.overflow&&(e.config[s].overflow=e.overflow);const n=t.inner.initClass(PageView,e.config[s]);n.index=s,i.push(n)}t.index=0}(),this.resize=(()=>{for(let e=0;e<i.length;e++)i[e].resize();defer(o)}),this.change=(e=>{const t=document.scrollingElement||document.documentElement;TweenManager.tween(t,{scrollTop:i[e.innerPage].element.offsetTop},700,"wipe")}),this.animateIn=((e,t)=>{defer(()=>{o(),(document.scrollingElement||document.documentElement).scrollTop=i[this.index].element.offsetTop,i[this.index].animateIn(),t?this.css({opacity:0}).tween({opacity:1},400,"easeOutCubic",()=>this.clearOpacity()):this.transform({y:window.innerHeight*e}).tween({y:0},700,"wipe"),this.startRender(a)})}),this.animateOut=((e,t)=>{this.tween({opacity:0},400,"easeInCubic"),this.delayedCall(t,1e3)})}}class Pages extends Interface{constructor(){super("Pages");const e=this;let t,i,s,n=1;e.size("100%"),e.css({height:"",position:"relative",display:"block"}),this.resize=(()=>{t&&t.resize()}),this.change=(e=>{n=(s=e).direction||n,i=this.initClass(Page,s),t&&t.setZ(1),i.setZ(5),i.resize(),t?t.animateOut(n,()=>{t=t.destroy(),t=i}):t=i,i.animateIn(n,s.init),s.init=!1})}}class CanvasGridTexture extends Component{constructor(){super();const e=this;let t,i,s,n,r,a,o;this.needsUpdate=!1,t=e.initClass(Canvas,window.innerWidth,window.innerHeight,!0,!0),e.canvas=t,(a=new THREE.Texture(t.element)).minFilter=THREE.LinearFilter,e.texture=a,(i=e.initClass(CanvasGraphics)).fillStyle="#111",t.add(i),(s=e.initClass(CanvasGraphics)).fillStyle="rgba(255, 255, 255, 0.1)",t.add(s),n=e.initClass(AlienKittyCanvas),e.alienkitty=n,(r=e.initClass(CanvasTexture,n.element,90,86)).opacity=1,t.add(r),this.update=(()=>{t.size(window.innerWidth,window.innerHeight),i.clear(),i.fillRect(0,0,t.width,t.height),function(){s.clear();const e=t.height/10;for(let i=0;i<10;i++)for(let n=0;n<t.width/10;n++)s.beginPath(),s.arc(e*(n+.5),e*(i+.5),2.5/Math.PI,0,2*Math.PI,!1),s.fill()}(),r.transform({x:(t.width-r.width)/2,y:(t.height-r.height)/2-65}),t.render(),a.needsUpdate=!0}),this.showAlienKitty=(e=>{Timer.clearTimeout(o),this.needsUpdate=!0,TweenManager.tween(r,{opacity:1},e,"easeInOutExpo"),o=this.delayedCall(()=>this.needsUpdate=!1,500)}),this.hideAlienKitty=(()=>{Timer.clearTimeout(o),this.needsUpdate=!0,TweenManager.tween(r,{opacity:0},250,"easeOutSine"),o=this.delayedCall(()=>this.needsUpdate=!1,500)}),this.animateIn=n.animateIn,this.ready=n.ready}}class CanvasGrid extends Component{constructor(){super();const e=this;let t,i,s;function n(){e.object3D.visible&&(t.needsUpdate||t.alienkitty.needsUpdate)&&(t.canvas.render(),t.texture.needsUpdate=!0)}this.object3D=new THREE.Object3D,t=e.initClass(CanvasGridTexture),e.object3D.visible=!1,i=e.initClass(Shader,vertBasicShader,fragBasicShader,{time:World.time,resolution:World.resolution,texture:{value:t.texture},opacity:{value:0},depthWrite:!1,depthTest:!1}),s=new THREE.Mesh(new THREE.PlaneBufferGeometry(1,1),i.material),e.object3D.add(s),this.resize=(()=>{t.update(),s.scale.set(window.innerWidth,window.innerHeight,1)}),this.showAlienKitty=t.showAlienKitty,this.hideAlienKitty=t.hideAlienKitty,this.animateIn=(()=>{t.update(),t.animateIn(),t.canvas.render(),t.texture.needsUpdate=!0,this.startRender(n),this.object3D.visible=!0}),this.ready=t.ready}}class Scene extends Component{constructor(){super();const e=this;let t;function i(e){const i=Math.range(e,0,400,300,50);t.showAlienKitty(i)}function s(){t.hideAlienKitty()}t=e.initClass(CanvasGrid),World.scene.add(t.object3D),e.events.add(Events.GLITCH_IN,i),e.events.add(Events.GLITCH_OUT,s),this.resize=t.resize,this.animateIn=t.animateIn,this.ready=t.ready}}class World extends Component{static instance(){return this.singleton||(this.singleton=new World),this.singleton}constructor(){super();const e=this,t=Device.mobile?2:1;let i,s,n,r,a,o,l;function h(){i.setSize(window.innerWidth,window.innerHeight),r.setSize(window.innerWidth,window.innerHeight),n.left=-window.innerWidth/2,n.right=window.innerWidth/2,n.top=window.innerHeight/2,n.bottom=-window.innerHeight/2,n.updateProjectionMatrix(),World.resolution.value.set(window.innerWidth*World.dpr,window.innerHeight*World.dpr)}function c(i){const s=Math.range(i,0,400,300,50);Timer.clearTimeout(l),World.effects.enabled=!0,TweenManager.tween(a.uniforms.distortion,{value:Math.range(i,0,400,0,8)*t},s,"easeInOutExpo"),TweenManager.tween(a.uniforms.distortion2,{value:Math.range(i,0,400,0,2)*t},s,"easeInOutExpo"),TweenManager.tween(o.uniforms.distortion,{value:Math.range(i,0,400,0,.02)*t},s,"easeInOutExpo"),l=e.delayedCall(()=>{TweenManager.tween(a.uniforms.distortion,{value:1*t},300,"easeInOutExpo"),TweenManager.tween(a.uniforms.distortion2,{value:1*t},300,"easeInOutExpo"),TweenManager.tween(o.uniforms.distortion,{value:.002*t},300,"easeInOutExpo")},s)}function u(){Timer.clearTimeout(l),TweenManager.tween(a.uniforms.distortion,{value:0},300,"easeOutSine"),TweenManager.tween(a.uniforms.distortion2,{value:0},300,"easeOutSine"),TweenManager.tween(o.uniforms.distortion,{value:0},300,"easeOutSine"),l=e.delayedCall(()=>World.effects.enabled=!1,500)}function d(){TweenManager.tween(a.uniforms.distortion,{value:4*t},300,"easeInOutExpo"),TweenManager.tween(a.uniforms.distortion2,{value:1*t},300,"easeInOutExpo"),TweenManager.tween(o.uniforms.distortion,{value:.01*t},300,"easeInOutExpo"),l=e.delayedCall(()=>e.events.fire(Events.GLITCH_OUT),500)}World.dpr=Math.min(2,Device.pixelRatio),(i=new THREE.WebGLRenderer({powerPreference:"high-performance"})).setPixelRatio(World.dpr),i.domElement.style.position="fixed",s=new THREE.Scene,n=new THREE.OrthographicCamera(-1,1,1,-1,0,1),World.scene=s,World.renderer=i,World.element=i.domElement,World.camera=n,World.time={value:0},World.resolution={value:new THREE.Vector2},r=e.initClass(Effects,Stage,{renderer:i,scene:s,camera:n,dpr:World.dpr}),a=e.initClass(Shader,vertBadTV,fragBadTV,{time:World.time,resolution:World.resolution,texture:{type:"t",value:null},distortion:{value:0},distortion2:{value:0},depthWrite:!1,depthTest:!1}),o=e.initClass(Shader,vertRGB,fragRGB,{time:World.time,resolution:World.resolution,texture:{type:"t",value:null},distortion:{value:0},depthWrite:!1,depthTest:!1}),r.add(a),r.add(o),World.effects=r,e.events.add(Events.RESIZE,h),e.events.add(Events.GLITCH_IN,c),e.events.add(Events.GLITCH_OUT,u),e.events.add(Events.GLITCH_LOADER,d),h(),this.startRender(function(e,t){World.time.value+=.001*t,r.render()})}}class Container extends Interface{static instance(){return this.singleton||(this.singleton=new Container),this.singleton}constructor(){super("Container");const e=this;let t,i;function s(){t.resize(),i.resize()}function n(e){i.change(e)}e.size("100%"),e.css({height:"",position:"relative",display:"block"}),Stage.add(e),World.instance(),e.add(World),t=e.initClass(Scene),i=e.initClass(Pages),e.events.add(Events.RESIZE,s),e.events.add(Events.PAGE_CHANGE,n),s(),this.animateIn=t.animateIn,this.preload=t.ready}}class AlienKittyCanvas extends Component{constructor(){super();const e=this;let t,i,s,n;function r(){return Promise.all([Assets.loadImage("assets/images/alienkitty.svg"),Assets.loadImage("assets/images/alienkitty_eyelid.svg")]).then(a)}function a(r){i=e.initClass(CanvasTexture,r[0],90,86),(s=e.initClass(CanvasTexture,r[1],24,14)).transformPoint("50%",0).transform({x:35,y:25,scaleX:1.5,scaleY:.01}),(n=e.initClass(CanvasTexture,r[1],24,14)).transformPoint(0,0).transform({x:53,y:26,scaleX:1,scaleY:.01}),i.add(s),i.add(n),t.add(i)}function o(){e.delayedCall(Utils.headsTails(l,h),Utils.random(0,1e4))}function l(){e.needsUpdate=!0,TweenManager.tween(s,{scaleY:1.5},120,"easeOutCubic",()=>{TweenManager.tween(s,{scaleY:.01},180,"easeOutCubic")}),TweenManager.tween(n,{scaleX:1.3,scaleY:1.3},120,"easeOutCubic",()=>{TweenManager.tween(n,{scaleX:1,scaleY:.01},180,"easeOutCubic",()=>{e.needsUpdate=!1,o()})})}function h(){e.needsUpdate=!0,TweenManager.tween(s,{scaleY:1.5},120,"easeOutCubic",()=>{TweenManager.tween(s,{scaleY:.01},180,"easeOutCubic")}),TweenManager.tween(n,{scaleX:1.3,scaleY:1.3},180,"easeOutCubic",()=>{TweenManager.tween(n,{scaleX:1,scaleY:.01},240,"easeOutCubic",()=>{e.needsUpdate=!1,o()})})}function c(){e.needsUpdate&&t.render()}this.needsUpdate=!1,t=e.initClass(Canvas,90,86,!0,!0),e.canvas=t,e.element=t.element,r(),this.animateIn=(()=>{t.render(),this.startRender(c),o()}),this.ready=r}}class Loader extends Interface{constructor(){super("Loader");const e=this;let t;function i(){Container.instance().preload().then(s)}function s(){Container.instance().animateIn(),e.loaded=!0,e.events.fire(Events.COMPLETE)}e.size("100%").setZ(1).mouseEnabled(!1),e.css({position:"fixed",left:0,top:0,overflow:"hidden"}),e.bg("#111"),function(){const i=e.create(".wrapper");i.size(90,86).center(),i.css({marginTop:-108,overflow:"hidden"}),(t=i.initClass(AlienKittyCanvas)).canvas.object.transform({y:86}),t.ready().then(()=>{t.animateIn(),t.canvas.object.tween({y:0},1e3,"easeOutCubic",500)})}(),Config.ASSETS.push(`assets/data/config.json?${Utils.timestamp()}`),Promise.all([FontLoader.loadFonts([{font:"Neue Haas Grotesk",style:"normal",weight:"normal"},{font:"Neue Haas Grotesk",style:"normal",weight:"bold"}]),AssetLoader.loadAssets(Config.ASSETS)]).then(i),this.animateOut=(e=>{this.tween({opacity:0},50,"easeInOutExpo",e)})}}class Main{constructor(){if(!Device.webgl)return window.location="fallback.html";let e;function t(){Stage.events.fire(Events.COMPLETE)}function i(){Stage.loaded=!0,Stage.events.fire(Events.COMPLETE)}function s(){e.loaded&&Stage.loaded&&Stage.delayedCall(()=>{e.animateOut(()=>{e=e.destroy(),Stage.events.fire(Events.PAGE_CHANGE,Config.PAGES[0])}),Stage.events.fire(Events.GLITCH_LOADER)},1e3)}Stage.size("100%"),Stage.css({height:"",position:"relative",display:"block"}),Stage.element.scrollParent=!0,e=Stage.initClass(Loader),Stage.events.add(e,Events.COMPLETE,t),Stage.delayedCall(i,2e3),Stage.events.add(Events.COMPLETE,s)}}new Main;
